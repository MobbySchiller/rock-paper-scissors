var u=Object.defineProperty;var a=(n,e,t)=>e in n?u(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var s=(n,e,t)=>(a(n,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))c(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();class d{constructor(){s(this,"openBtn");s(this,"closeBtn");s(this,"info");this.openBtn=document.querySelector("#rules-open"),this.closeBtn=document.querySelector("#rules-close"),this.info=document.querySelector("#rules-info")}init(){var e,t;(e=this.openBtn)==null||e.addEventListener("click",()=>this.openRules()),(t=this.closeBtn)==null||t.addEventListener("click",()=>this.closeRules())}openRules(){var e;(e=this.info)==null||e.classList.add("rules__info--active")}closeRules(){var e;(e=this.info)==null||e.classList.remove("rules__info--active")}}const h=new d,r=[{id:0,name:"rock"},{id:1,name:"paper"},{id:2,name:"scissors"}];class p{constructor(){s(this,"score");s(this,"selectSection");s(this,"duelSection");s(this,"options");s(this,"userPick");s(this,"userPickInside");s(this,"aiPick");s(this,"aiPickInside");s(this,"duelResult");s(this,"duelResultSign");s(this,"playAgainBtn");s(this,"picks");this.score=document.querySelector("#score"),this.selectSection=document.querySelector("#select-section"),this.duelSection=document.querySelector("#duel-section"),this.options=document.querySelectorAll("[data-option]"),this.userPick=document.querySelector("#user-pick"),this.userPickInside=document.querySelector("#user-pick-inside"),this.aiPick=document.querySelector("#ai-pick"),this.aiPickInside=document.querySelector("#ai-pick-inside"),this.duelResult=document.querySelector("#duel-result"),this.duelResultSign=document.querySelector("#duel-result-sign"),this.playAgainBtn=document.querySelector("#play-again-btn"),this.picks={user:"",ai:""}}init(){var e;h.init(),this.options.forEach(t=>t.addEventListener("click",c=>this.selectOption(c))),(e=this.playAgainBtn)==null||e.addEventListener("click",()=>this.playAgain()),sessionStorage.setItem("score","0")}selectOption(e){const t=Number(e.target.dataset.option);this.picks.user=r[t].name,this.contest()}contest(){this.picks.user&&(this.aiSelection(),this.changeView(),this.toggleUserPick(),setTimeout(()=>this.toggleAiPick(),1200),setTimeout(()=>this.displayResult(),1800),setTimeout(()=>this.changeScore(),1800))}aiSelection(){const e=Math.floor(Math.random()*r.length),t=r[e].name;this.picks.ai=t}changeView(){var e,t;(e=this.selectSection)==null||e.classList.toggle("select--active"),(t=this.duelSection)==null||t.classList.toggle("duel--active")}toggleUserPick(){var e,t;(e=this.userPick)==null||e.classList.toggle(`pick__option--${this.picks.user}`),(t=this.userPickInside)==null||t.classList.toggle(`pick__option-inside--${this.picks.user}`)}toggleAiPick(){var e,t,c;(e=this.aiPick)==null||e.classList.toggle(`pick__option--${this.picks.ai}`),(t=this.aiPickInside)==null||t.classList.toggle("pick__option-inside"),(c=this.aiPickInside)==null||c.classList.toggle(`pick__option-inside--${this.picks.ai}`)}displayResult(){var t;const e=this.checkResult();this.setResultSign(e),this.setResultStatus(e),(t=this.duelResult)==null||t.classList.add("duel__result--active")}changeScore(){if(this.checkResult()!=="win")return;const c=Number(sessionStorage.getItem("score"))+1;sessionStorage.setItem("score",String(c)),this.score!==null&&(this.score.textContent=String(c))}hideResult(){var t;const e=this.checkResult();this.removeResultStatus(e),(t=this.duelResult)==null||t.classList.remove("duel__result--active")}setResultSign(e){this.duelResultSign!==null&&(e!=="draw"?this.duelResultSign.textContent=`you ${e}`:this.duelResultSign.textContent=e)}setResultStatus(e){var c,i;if(e==="draw")return;const t=document.createElement("div");t.classList.add("pick__option-outside"),e==="win"?(c=this.userPick)==null||c.appendChild(t):(i=this.aiPick)==null||i.appendChild(t)}removeResultStatus(e){e!=="draw"&&(e==="win"?this.userPick&&this.userPick.lastChild&&this.userPick.removeChild(this.userPick.lastChild):this.aiPick&&this.aiPick.lastChild&&this.aiPick.removeChild(this.aiPick.lastChild))}checkResult(){const{user:e,ai:t}=this.picks;return e==="paper"&&t==="rock"||e==="rock"&&t==="scissors"||e==="scissors"&&t==="paper"?"win":e===t?"draw":"lose"}playAgain(){this.changeView(),this.toggleUserPick(),this.toggleAiPick(),this.hideResult(),this.picks={user:"",ai:""}}}const g=new p;g.init();
